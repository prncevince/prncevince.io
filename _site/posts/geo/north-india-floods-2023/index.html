<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.339">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vincent Clemson">
<meta name="dcterms.date" content="2023-10-12">
<meta name="description" content="A quick turn analysis to visually compare events caused by the Glacial Lake Outburst Flood in the Indian Himalayan Region of Sikkim during early October of 2023.">

<title>North India Floods of October 2023 | Vincent Clemson</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../assets/img/favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../../assets/css/style.css">
<meta property="og:title" content="North India Floods of October 2023 | Vincent Clemson">
<meta property="og:description" content="A quick turn analysis to visually compare events caused by the Glacial Lake Outburst Flood in the Indian Himalayan Region of Sikkim during early October of 2023.">
<meta property="og:image" content="https://prncevince.github.io/assets/img/posts.png">
<meta property="og:site_name" content="Vincent Clemson">
<meta property="og:image:height" content="1378">
<meta property="og:image:width" content="2500">
<meta name="twitter:title" content="North India Floods of October 2023 | Vincent Clemson">
<meta name="twitter:description" content="A quick turn analysis to visually compare events caused by the Glacial Lake Outburst Flood in the Indian Himalayan Region of Sikkim during early October of 2023.">
<meta name="twitter:image" content="https://prncevince.github.io/assets/img/posts.png">
<meta name="twitter:creator" content="@prncevincecares">
<meta name="twitter:site" content="@prncevincecares">
<meta name="twitter:image-height" content="1378">
<meta name="twitter:image-width" content="2500">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Vincent Clemson</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../posts/index.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../about/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/prncevince" target="_blank">
 <span class="dropdown-text">GitHub</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/prncevince/prncevince.github.io" target="_blank">
 <span class="dropdown-text">Source Code 💻</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/prncevince/prncevince.github.io/discussions" target="_blank">
 <span class="dropdown-text">Discussions 🗣</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-twitter" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-twitter">    
        <li>
    <a class="dropdown-item" href="https://twitter.com/prncevincecares" target="_blank">
 <span class="dropdown-text">News &amp; Science &amp; Code 🚀</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://twitter.com/prncevincestats" target="_blank">
 <span class="dropdown-text">Sports 🎾</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tldr" id="toc-tldr" class="nav-link active" data-scroll-target="#tldr">TLDR</a></li>
  <li><a href="#intro" id="toc-intro" class="nav-link" data-scroll-target="#intro">Intro</a></li>
  <li><a href="#data-aggregation" id="toc-data-aggregation" class="nav-link" data-scroll-target="#data-aggregation">Data Aggregation</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a></li>
  <li><a href="#web-map" id="toc-web-map" class="nav-link" data-scroll-target="#web-map">Web Map</a></li>
  <li><a href="#wrap-up" id="toc-wrap-up" class="nav-link" data-scroll-target="#wrap-up">Wrap-up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">North India Floods of October 2023</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button" data-quarto-source-url="https://github.com/prncevince/prncevince.github.io/blob/main/posts/geo/north-india-floods-2023/index.ipynb">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">Geospatial</div>
    <div class="quarto-category">Maxar</div>
    <div class="quarto-category">Natural Disasters</div>
    <div class="quarto-category">COG</div>
    <div class="quarto-category">STAC</div>
    <div class="quarto-category">Tiling</div>
    <div class="quarto-category">Python</div>
    <div class="quarto-category">Leaflet</div>
    <div class="quarto-category">Development Seed</div>
    <div class="quarto-category">Open Data</div>
    <div class="quarto-category">Flood</div>
    <div class="quarto-category">Landslide</div>
  </div>
  </div>

<div>
  <div class="description">
    A quick turn analysis to visually compare events caused by the Glacial Lake Outburst Flood in the Indian Himalayan Region of Sikkim during early October of 2023.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vincent Clemson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 12, 2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">October 12, 2023</p>
    </div>
  </div>
    
  </div>
  


</header>

<div id="fig-north-india-flood" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="india-north-flood-3x-3fps-1080w-80lossy-O3.gif" class="img-fluid figure-img" width="1080"></p>
<figcaption class="figure-caption">Figure&nbsp;1: A split web map displaying avalanche damage to South Lhonak Lake (a <a href="https://en.wikipedia.org/wiki/Glacial_lake">glacier lake</a>) in the Indian Himalayan Region. <br>The pre &amp; post event satellite imagery was obtained from Maxar’s Open Data Program.</figcaption>
</figure>
</div>
<section id="tldr" class="level2">
<h2 class="anchored" data-anchor-id="tldr">TLDR</h2>
<p>I quickly visualize Maxar’s recent release in response to the flooding events in the northern Himalayan region of Sikkim, India in October of 2023. <a href="#fig-video-demo" class="quarto-xref">Figure&nbsp;4</a> displays a demo of this. You can use <a href="#fig-split-india-floods" class="quarto-xref">Figure&nbsp;3</a> to interact with the web map for yourself.</p>
<p>My <a href="../natural-disasters-maxar-open-data/">previous post</a> is a technical deep dive that covers the tooling used behind these techniques.</p>
</section>
<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>On the morning of October 12th, 2023, Maxar released an activation alert within their Open Data Program on the recent flooding that devastated Sikkim, India in the Indian Himalayan Region last week on Wednesday October 4th. It has <a href="https://www.nytimes.com/2023/10/06/world/asia/india-flood-sikkim-climate-change.html">been reported</a> that the flooding was caused by a Glacial Lake Outburst Flood (<a href="https://en.wikipedia.org/wiki/Glacial_lake_outburst_flood">GLOF</a>) from a melting glacier at <a href="https://en.wikipedia.org/wiki/South_Lhonak_Lake">South Lhonak Lake</a>. Ultimately, the flooding triggered from the glacier lake area destroyed the Chungthang Dam and it’s surrounding town miles away downstream.</p>
<p><a href="#fig-gmaps-lake-dam" class="quarto-xref">Figure&nbsp;2</a> captures the area between the <a href="https://maps.app.goo.gl/kJwEHhW4HgVtZtHj8">South Lhonak Lake</a> (the glacier lake) and the <a href="https://maps.app.goo.gl/cwTN1khAJraHy9L8A">Chungthang Dam</a>.</p>
<div id="fig-gmaps-lake-dam" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="gmaps-lake-dam.jpg" class="img-fluid figure-img" width="480"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Google Maps view from South Lhonak Lake (upper left) to Chungthang Dam (bottom right). <a href="https://www.google.com/maps/dir/South+Lhonak+lake,+Sikkim/Chungthang+Dam,+HMX2%2BCFV,+Chungthang,+Sikkim+737120,+India/@27.7729263,88.3462132,59112m/data=!3m1!1e3!4m13!4m12!1m5!1m1!1s0x39e6ffd803a064a5:0xefd14b702b0bc933!2m2!1d88.3324332!2d27.9456049!1m5!1m1!1s0x39e6c97f25058d91:0xba8a162a84b81f12!2m2!1d88.6511597!2d27.5986205?entry=ttu">Source</a></figcaption>
</figure>
</div>
<p>Here I use open source technologies to build a web map that displays the released satellite imagery over the region. In particular, <a href="#fig-split-india-floods" class="quarto-xref">Figure&nbsp;3</a> is a web map that showcases before and after the GLOF took place to help make visual comparisons of the disaster.</p>
<p>Additionally, Dan Shugar previously released an in-depth thread of the GLOF that triggered the flooding using <a href="https://www.planet.com/">Planet Labs</a> imagery from the SuperDove satellites. It’s a great resource (below) to understand the chain of events that happened during the floods.</p>
<p></p><div id="tweet-16411"></div><script>tweet={"url":"https:\/\/twitter.com\/Maxar\/status\/1712458332890386858","author_name":"Maxar Technologies","author_url":"https:\/\/twitter.com\/Maxar","html":"\u003Cblockquote class=\"twitter-tweet\" align=\"center\"\u003E\u003Cp lang=\"en\" dir=\"ltr\"\u003E\uD83D\uDEA8 Open Data Program Activation Alert\u003Cbr\u003E\uD83C\uDF0D Event: Flooding in North India \u003Cbr\u003E✅ Access the latest satellite imagery\u003Cbr\u003E➡️ \u003Ca href=\"https:\/\/t.co\/DmFdNZpNeE\"\u003Ehttps:\/\/t.co\/DmFdNZpNeE\u003C\/a\u003E\u003C\/p\u003E&mdash; Maxar Technologies (@Maxar) \u003Ca href=\"https:\/\/twitter.com\/Maxar\/status\/1712458332890386858?ref_src=twsrc%5Etfw\"\u003EOctober 12, 2023\u003C\/a\u003E\u003C\/blockquote\u003E\n\u003Cscript async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"\u003E\u003C\/script\u003E\n","width":550,"height":null,"type":"rich","cache_age":"3153600000","provider_name":"Twitter","provider_url":"https:\/\/twitter.com","version":"1.0"};document.getElementById("tweet-16411").innerHTML = tweet["html"];</script><p></p>
<p></p><div id="tweet-47269"></div><script>tweet={"url":"https:\/\/twitter.com\/WaterSHEDLab\/status\/1711559785173438674","author_name":"Dan Shugar","author_url":"https:\/\/twitter.com\/WaterSHEDLab","html":"\u003Cblockquote class=\"twitter-tweet\" align=\"center\"\u003E\u003Cp lang=\"en\" dir=\"ltr\"\u003EToday \u003Ca href=\"https:\/\/twitter.com\/planet?ref_src=twsrc%5Etfw\"\u003E@planet\u003C\/a\u003E acquired a mostly cloud-free SuperDove satellite image of \u003Ca href=\"https:\/\/twitter.com\/hashtag\/SouthLhonakLake?src=hash&amp;ref_src=twsrc%5Etfw\"\u003E#SouthLhonakLake\u003C\/a\u003E to \u003Ca href=\"https:\/\/twitter.com\/hashtag\/Chungthang?src=hash&amp;ref_src=twsrc%5Etfw\"\u003E#Chungthang\u003C\/a\u003E dam (\u003Ca href=\"https:\/\/twitter.com\/hashtag\/Teesta3HEP?src=hash&amp;ref_src=twsrc%5Etfw\"\u003E#Teesta3HEP\u003C\/a\u003E), giving us the first good view of the devastation caused by the Glacial Lake Outburst Flood (\u003Ca href=\"https:\/\/twitter.com\/hashtag\/GLOF?src=hash&amp;ref_src=twsrc%5Etfw\"\u003E#GLOF\u003C\/a\u003E). 1\/n \u003Ca href=\"https:\/\/t.co\/BpgAHyh33n\"\u003Epic.twitter.com\/BpgAHyh33n\u003C\/a\u003E\u003C\/p\u003E&mdash; Dan Shugar (@WaterSHEDLab) \u003Ca href=\"https:\/\/twitter.com\/WaterSHEDLab\/status\/1711559785173438674?ref_src=twsrc%5Etfw\"\u003EOctober 10, 2023\u003C\/a\u003E\u003C\/blockquote\u003E\n\u003Cscript async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"\u003E\u003C\/script\u003E\n","width":550,"height":null,"type":"rich","cache_age":"3153600000","provider_name":"Twitter","provider_url":"https:\/\/twitter.com","version":"1.0"};document.getElementById("tweet-47269").innerHTML = tweet["html"];</script><p></p>
</section>
<section id="data-aggregation" class="level2">
<h2 class="anchored" data-anchor-id="data-aggregation">Data Aggregation</h2>
<div id="b33ce247-994e-4de7-a8be-006a4792401b" class="cell" data-execution_count="22">
<details>
<summary>North India Flood Event Image Tile Aggregation - Maxar’s Open Data Program</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>p_datasets <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/opengeos/maxar-open-data/master/datasets.csv'</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>d_maxar <span class="op">=</span> pd.read_csv(p_datasets)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>p_top <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/opengeos/maxar-open-data/master/datasets/'</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>p_bottom <span class="op">=</span> <span class="st">'.geojson'</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>event <span class="op">=</span> <span class="st">'India-Floods-Oct-2023'</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>d_event <span class="op">=</span> d_maxar[d_maxar.dataset <span class="op">==</span> event]</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>l_gdf <span class="op">=</span> [gpd.read_file(p_top<span class="op">+</span>d<span class="op">+</span>p_bottom).assign(event <span class="op">=</span> d) <span class="cf">for</span> d <span class="kw">in</span> d_event[<span class="st">'dataset'</span>].to_list()]</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>d_tiles <span class="op">=</span> (pd.concat(l_gdf, ignore_index<span class="op">=</span><span class="va">True</span>))</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># changes column order - puts event &amp; geometry first</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>d_tiles <span class="op">=</span> d_tiles[d_tiles.columns[<span class="op">-</span><span class="dv">2</span>::][::<span class="op">-</span><span class="dv">1</span>].append(d_tiles.columns[:<span class="op">-</span><span class="dv">2</span>])]</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>dict_event <span class="op">=</span> {</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">'India-Floods-Oct-2023'</span>: [<span class="st">'2023-10-04 00:00:00'</span>, <span class="st">'https://www.maxar.com/open-data/india-floods-oct-2023'</span>],</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>d_event <span class="op">=</span> pd.DataFrame.from_dict(dict_event, orient<span class="op">=</span><span class="st">'index'</span>, columns<span class="op">=</span>[<span class="st">'t_event'</span>, <span class="st">'source'</span>])</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>d_event <span class="op">=</span> (d_event</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a> .reset_index(names<span class="op">=</span><span class="st">'event'</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a> .assign(t_event <span class="op">=</span> pd.to_datetime(d_event.t_event, utc<span class="op">=</span><span class="va">True</span>).to_list())</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a> .sort_values(<span class="st">'t_event'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a> .reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># right join removes old datasets stored in opengeos/maxar-open-data</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>d_tiles <span class="op">=</span> pd.merge(left<span class="op">=</span>d_tiles, right<span class="op">=</span>d_event, how<span class="op">=</span><span class="st">'right'</span>, left_on<span class="op">=</span><span class="st">'event'</span>, right_on<span class="op">=</span><span class="st">'event'</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>d_tiles <span class="op">=</span> d_tiles.assign(pre_post <span class="op">=</span> np.where(d_tiles.datetime <span class="op">&lt;</span> d_tiles.t_event, <span class="st">'pre'</span>, <span class="st">'post'</span>))</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>d_tiles.insert(<span class="dv">1</span>, <span class="st">'pre_post'</span>, d_tiles.pop(<span class="st">'pre_post'</span>))</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="co"># sort by latest event date </span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>d_tiles <span class="op">=</span> (d_tiles</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a> .assign(latest <span class="op">=</span> d_tiles.groupby(<span class="st">'event'</span>)[<span class="st">'t_event'</span>].transform(<span class="st">'max'</span>))</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a> .sort_values([<span class="st">'latest'</span>,<span class="st">'datetime'</span>], ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a> .drop(<span class="st">'latest'</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a> .reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time.time()</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">str</span>(<span class="bu">round</span>(end<span class="op">-</span>start, <span class="dv">2</span>))<span class="op">+</span><span class="st">' seconds'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>0.29 seconds</code></pre>
</div>
</div>
<div id="b495bc08-3d4e-4edd-9aeb-949db2b2914e" class="cell" data-execution_count="19">
<details>
<summary>Pre &amp; Post Event MosaicJSON Creation</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cogeo_mosaic.mosaic <span class="im">import</span> MosaicJSON</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cogeo_mosaic.backends <span class="im">import</span> MosaicBackend</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> e <span class="kw">in</span> np.unique(d_tiles.event):</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    d <span class="op">=</span> d_tiles[d_tiles.event <span class="op">==</span> e].reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># write output</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    os.makedirs(<span class="st">'data/'</span><span class="op">+</span>e, exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> [<span class="st">'pre'</span>, <span class="st">'post'</span>]:</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        images <span class="op">=</span> d[d.pre_post <span class="op">==</span> i].reset_index(drop<span class="op">=</span><span class="va">True</span>).visual.tolist()</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(images) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>            mosaic <span class="op">=</span> MosaicJSON.from_urls(images)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">with</span> MosaicBackend(<span class="st">'data/'</span><span class="op">+</span>e<span class="op">+</span><span class="st">'/mosaic-tiles-'</span><span class="op">+</span>i<span class="op">+</span><span class="st">'.json'</span>, mosaic_def<span class="op">=</span>mosaic) <span class="im">as</span> f:</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                f.write(overwrite<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> time.time()</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(e<span class="op">+</span><span class="st">' Pre/Post MosaicJSON Time: '</span><span class="op">+</span><span class="bu">str</span>(<span class="bu">round</span>(end<span class="op">-</span>start, <span class="dv">2</span>))<span class="op">+</span><span class="st">'s'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>India-Floods-Oct-2023 Pre/Post MosaicJSON Time: 66.61s</code></pre>
</div>
</div>
<div id="d51c7833-51bc-4441-a435-bb12c2b815f1" class="cell" data-execution_count="20">
<details>
<summary>Image Footprint Metadata Aggregation</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>cols_tile <span class="op">=</span> [</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'visual'</span>, <span class="st">'tile:data_area'</span>, <span class="st">'tile:clouds_area'</span>, <span class="st">'tile:clouds_percent'</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'view:off_nadir'</span>, <span class="st">'view:azimuth'</span>, <span class="st">'view:incidence_angle'</span>, <span class="st">'view:sun_azimuth'</span>, <span class="st">'view:sun_elevation'</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'gsd'</span>, <span class="st">'proj:bbox'</span>, <span class="st">'quadkey'</span>, <span class="st">'utm_zone'</span>, <span class="st">'grid:code'</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create bounding box from image footprint instead of these</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>cols_drop <span class="op">=</span> [<span class="st">'proj:bbox'</span>, <span class="st">'quadkey'</span>, <span class="st">'grid:code'</span>]</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>cols_tile_unique <span class="op">=</span> [<span class="st">'utm_zone'</span>, <span class="st">'tile:clouds_area'</span>]</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>cols_tile_mean <span class="op">=</span> [<span class="st">'gsd'</span>, <span class="st">'tile:clouds_percent'</span>, <span class="st">'view:off_nadir'</span>, <span class="st">'view:azimuth'</span>, <span class="st">'view:incidence_angle'</span>, <span class="st">'view:sun_azimuth'</span>, <span class="st">'view:sun_elevation'</span>]</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>cols_tile_footprint <span class="op">=</span> [<span class="st">'event'</span>, <span class="st">'pre_post'</span>, <span class="st">'catalog_id'</span>]</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>d_agg <span class="op">=</span> (d_tiles[cols_tile_footprint<span class="op">+</span>cols_tile_unique]</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a> .groupby(cols_tile_footprint)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a> .agg({</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>     <span class="st">'utm_zone'</span>: <span class="kw">lambda</span> x: np.unique(x).tolist(),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>     <span class="st">'tile:clouds_area'</span>: <span class="kw">lambda</span> x: <span class="bu">round</span>(<span class="bu">sum</span>(x), <span class="dv">2</span>),</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a> })</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>d_agg_mean <span class="op">=</span> (d_tiles[cols_tile_footprint<span class="op">+</span>cols_tile_mean]</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a> .groupby(cols_tile_footprint)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a> .agg(<span class="kw">lambda</span> x: <span class="bu">round</span>(np.mean(x), <span class="dv">2</span>))</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>d_foot <span class="op">=</span> (d_tiles[d_tiles.columns.difference(cols_drop<span class="op">+</span>cols_tile_unique<span class="op">+</span>cols_tile_mean).to_list()]</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a> .dissolve(cols_tile_footprint, aggfunc <span class="op">=</span> <span class="st">'first'</span>)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a> <span class="co"># same index - can left join aggregates on index by default</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a> .join(d_agg).join(d_agg_mean)</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a> <span class="co"># add index back to dataframe</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a> .reset_index()</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co"># split because `d` carries from original when chaining</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>d_foot <span class="op">=</span> (d_foot</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a> .assign(</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>     <span class="co"># uses equal area projection - converts km^2 original units </span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>     footprint_data_area <span class="op">=</span> <span class="kw">lambda</span> d: <span class="bu">round</span>(d.geometry.to_crs(epsg<span class="op">=</span><span class="dv">6933</span>).area<span class="op">/</span><span class="fl">1e6</span>, <span class="dv">2</span>),</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>     bbox <span class="op">=</span> d_foot.geometry.bounds.applymap(<span class="kw">lambda</span> x: <span class="bu">round</span>(np.mean(x), <span class="dv">2</span>)).values.tolist()</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a> .sort_values([<span class="st">'t_event'</span>, <span class="st">'datetime'</span>], ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a> .reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a> .rename(columns<span class="op">=</span>{</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>     <span class="st">'tile:clouds_area'</span>: <span class="st">'footprint:clouds_area'</span>, <span class="st">'tile:clouds_percent'</span>: <span class="st">'footprint:clouds_percent'</span>,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>     <span class="st">'footprint_data_area'</span>: <span class="st">'footprint:data_area'</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a> })</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>We see that there are currently 5 images acquisitions (image footprints) released from before the flooding and 1 image acquisition taken after the flooding.</p>
<div id="b9e8b257-b5df-4a1c-8253-582303654e48" class="cell" data-execution_count="23">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> pd.DataFrame(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  (d_foot</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  .groupby([<span class="st">'event'</span>, <span class="st">'pre_post'</span>])</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  ).size(),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  columns<span class="op">=</span>[<span class="st">'count'</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>).reset_index()</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> (d[d.event <span class="op">==</span> event]</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a> .reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>d.style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">
<style type="text/css">
</style>

<table id="T_5b0b0" data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th id="T_5b0b0_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">event</th>
<th id="T_5b0b0_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">pre_post</th>
<th id="T_5b0b0_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_5b0b0_row0_col0" class="data row0 col0">India-Floods-Oct-2023</td>
<td id="T_5b0b0_row0_col1" class="data row0 col1">post</td>
<td id="T_5b0b0_row0_col2" class="data row0 col2">1</td>
</tr>
<tr class="even">
<td id="T_5b0b0_row1_col0" class="data row1 col0">India-Floods-Oct-2023</td>
<td id="T_5b0b0_row1_col1" class="data row1 col1">pre</td>
<td id="T_5b0b0_row1_col2" class="data row1 col2">5</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="web-map" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="web-map">Web Map</h2>
<div id="82d06902-e8fd-41e6-b299-667405d3fb8b" class="cell" data-execution_count="26">
<details>
<summary>Split Web Map of North India Floods</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> leafmap</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> leafmap.foliumap</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> folium <span class="im">import</span> Element</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> leafmap2 <span class="im">import</span> add_geojson2, add_gdf2</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>leafmap.foliumap.Map.add_geojson2 <span class="op">=</span> add_geojson2</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>leafmap.foliumap.Map.add_gdf2 <span class="op">=</span> add_gdf2</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 'p' for path | 'm' for mosaic | 'f' for footprint</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>event <span class="op">=</span> <span class="st">'India-Floods-Oct-2023'</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>pm_top <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/prncevince/mosaicjson-examples/main/maxar-open-data/'</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>pm_end_pre <span class="op">=</span> <span class="st">'/mosaic-tiles-pre.json'</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>pm_end_post <span class="op">=</span> <span class="st">'/mosaic-tiles-post.json'</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>cols_drop <span class="op">=</span> [<span class="st">'source'</span>, <span class="st">'proj:epsg'</span>, <span class="st">'t_event'</span>]</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> d_foot[d_foot.event <span class="op">==</span> event]</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>d.drop(cols_drop, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> leafmap.foliumap.Map()</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> style_footprints(color, fillOpacity, weight):</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    style <span class="op">=</span> {</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">'color'</span>: color, <span class="st">'fillOpacity'</span>: fillOpacity, <span class="st">'weight'</span>: weight</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> style</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>basemap <span class="op">=</span> {  </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"url"</span>: <span class="st">"https://mt1.google.com/vt/lyrs=s&amp;x=</span><span class="sc">{x}</span><span class="st">&amp;y=</span><span class="sc">{y}</span><span class="st">&amp;z=</span><span class="sc">{z}</span><span class="st">"</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"attribution"</span>: <span class="st">"Google"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"name"</span>: <span class="st">"Google Satellite"</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>m.add_tile_layer(<span class="op">**</span>basemap, shown<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>m.add_stac_layer(pm_top<span class="op">+</span>event<span class="op">+</span>pm_end_pre, name<span class="op">=</span><span class="st">"Pre-Event - Mosaic"</span>, attribution<span class="op">=</span><span class="st">"Maxar Technologies"</span>, shown<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>m.add_stac_layer(pm_top<span class="op">+</span>event<span class="op">+</span>pm_end_post, name<span class="op">=</span><span class="st">"Post-Event - Mosaic"</span>, attribution<span class="op">=</span><span class="st">"Maxar Technologies"</span>)</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>m.add_gdf2(</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    d[d.pre_post <span class="op">==</span> <span class="st">'pre'</span>], <span class="st">"Pre Event - Image Footprints"</span>,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>    style<span class="op">=</span>style_footprints(<span class="st">'blue'</span>, <span class="dv">0</span>, <span class="fl">1.5</span>), info_mode<span class="op">=</span><span class="st">'both'</span>,</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    tooltip_fields_remove<span class="op">=</span>[<span class="st">'visual'</span>], kwargs_tooltip<span class="op">=</span>{<span class="st">'sticky'</span>: <span class="va">False</span>}</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>m.add_gdf2(</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    d[d.pre_post <span class="op">==</span> <span class="st">'post'</span>], <span class="st">"Post Event - Image Footprints"</span>,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>    style<span class="op">=</span>style_footprints(<span class="st">'red'</span>, <span class="dv">0</span>, <span class="fl">1.5</span>), info_mode<span class="op">=</span><span class="st">'both'</span>,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>    tooltip_fields_remove<span class="op">=</span>[<span class="st">'visual'</span>], kwargs_tooltip<span class="op">=</span>{<span class="st">'sticky'</span>: <span class="va">False</span>}</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'./popup-fix.js'</span>) <span class="im">as</span> f: js_po <span class="op">=</span> f.read()</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'./side-by-side.js'</span>) <span class="im">as</span> f: js_sbs <span class="op">=</span> f.read()</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'./split-map-layout.css'</span>) <span class="im">as</span> f: css_sbs_l <span class="op">=</span> f.read()</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'./split-map-range.css'</span>) <span class="im">as</span> f: css_sbs_r <span class="op">=</span> f.read()</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a><span class="co">#with open('./split-map.js') as f: js_sm = f.read()</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a><span class="co"># must render 1st to add script after - otherwise adds JS before Leaflet L.Map assignment</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>m.get_root().render()</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a><span class="co"># add map &amp; geojson layer variables to script</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>var_map <span class="op">=</span> m.get_name()</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>var_geojson_lgs <span class="op">=</span> <span class="bu">str</span>([i <span class="cf">for</span> i <span class="kw">in</span> m._children.keys() <span class="cf">if</span> re.search(<span class="st">'^geo_json_'</span>, i) <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>]).replace(<span class="st">"'"</span>, <span class="st">""</span>)</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>tile_layers <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> m._children.keys() <span class="cf">if</span> re.search(<span class="st">'^tile_layer_'</span>, i) <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>]</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a><span class="co"># need to know the order of your tiles for adding as split map</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="co"># an area of multiple layers can be passed to left &amp; right arguments of L.control.sideBySide</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="co"># however, it's pretty buggy when passing more than one layer</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>i_all <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>] <span class="co"># a basemap, pre, &amp; post event</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>i_left <span class="op">=</span> [<span class="dv">2</span>]</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>i_right <span class="op">=</span> [<span class="dv">0</span>]</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>l_lleft <span class="op">=</span> <span class="bu">str</span>([j <span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">enumerate</span>(tile_layers) <span class="cf">if</span> i <span class="kw">in</span> i_left]).replace(<span class="st">"'"</span>, <span class="st">""</span>)</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>l_lright <span class="op">=</span> <span class="bu">str</span>([j <span class="cf">for</span> i, j <span class="kw">in</span> <span class="bu">enumerate</span>(tile_layers) <span class="cf">if</span> i <span class="kw">in</span> i_right]).replace(<span class="st">"'"</span>, <span class="st">""</span>)</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>m.get_root().header.add_child(Element(<span class="st">'&lt;style&gt;'</span><span class="op">+</span>css_sbs_l<span class="op">+</span><span class="st">'&lt;/style&gt;'</span>))</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>m.get_root().header.add_child(Element(<span class="st">'&lt;style&gt;'</span><span class="op">+</span>css_sbs_r<span class="op">+</span><span class="st">'&lt;/style&gt;'</span>))</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>m.get_root().script.add_child(Element(js_po.<span class="bu">format</span>(m<span class="op">=</span>var_map, lg_geo<span class="op">=</span>var_geojson_lgs)))</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>m.get_root().script.add_child(Element(js_sbs))</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>m.get_root().script.add_child(Element(<span class="st">'L.control.sideBySide(</span><span class="sc">{l_lleft}</span><span class="st">, </span><span class="sc">{l_lright}</span><span class="st">).addTo(</span><span class="sc">{m}</span><span class="st">);'</span>.<span class="bu">format</span>(l_lleft<span class="op">=</span>l_lleft, l_lright<span class="op">=</span>l_lright, m<span class="op">=</span>var_map)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-fig-split-india-floods" class="cell page-columns page-full" data-execution_count="28">
<div id="fig-split-india-floods" class="quarto-figure quarto-figure-center column-body-outset anchored">
<figure class="figure">
<iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_2730a6866ba285b2aae37797f85cdd66 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet.fullscreen/1.4.2/Control.FullScreen.min.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet.fullscreen/1.4.2/Control.FullScreen.min.css&quot;/>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css&quot;/>
    <script src=&quot;https://cdn.jsdelivr.net/gh/ljagis/leaflet-measure@2.1.7/dist/leaflet-measure.min.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/ljagis/leaflet-measure@2.1.7/dist/leaflet-measure.min.css&quot;/>
    <script src=&quot;https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css&quot;/>
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    
                    <style>
                        .foliumpopup {
                            margin: auto;
                        }
                       .foliumpopup table{
                            margin: auto;
                        }
                        .foliumpopup tr{
                            text-align: left;
                        }
                        .foliumpopup th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    
                    <style>
                        .foliumpopup {
                            margin: auto;
                        }
                       .foliumpopup table{
                            margin: auto;
                        }
                        .foliumpopup tr{
                            text-align: left;
                        }
                        .foliumpopup th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    <style>.leaflet-sbs-range {
    position: absolute;
    top: 50%;
    width: 100%;
    z-index: 999;
}
.leaflet-sbs-divider {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 50%;
    margin-left: -2px;
    width: 4px;
    background-color: #fff;
    pointer-events: none;
    z-index: 999;
}
</style>
    <style>.leaflet-sbs-range {
    -webkit-appearance: none;
    display: inline-block!important;
    vertical-align: middle;
    height: 0;
    padding: 0;
    margin: 0;
    border: 0;
    background: rgba(0, 0, 0, 0.25);
    min-width: 100px;
    cursor: pointer;
    pointer-events: none;
    z-index: 999;
}
.leaflet-sbs-range::-ms-fill-upper {
    background: transparent;
}
.leaflet-sbs-range::-ms-fill-lower {
    background: rgba(255, 255, 255, 0.25);
}
/* Browser thingies */

.leaflet-sbs-range::-moz-range-track {
    opacity: 0;
}
.leaflet-sbs-range::-ms-track {
    opacity: 0;
}
.leaflet-sbs-range::-ms-tooltip {
    display: none;
}
/* For whatever reason, these need to be defined
 * on their own so dont group them */

.leaflet-sbs-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    margin: 0;
    padding: 0;
    background: #fff;
    height: 40px;
    width: 40px;
    border-radius: 20px;
    cursor: ew-resize;
    pointer-events: auto;
    border: 1px solid #ddd;
    background-image: url(range-icon.png);
    background-position: 50% 50%;
    background-repeat: no-repeat;
    background-size: 40px 40px;
}
.leaflet-sbs-range::-ms-thumb {
    margin: 0;
    padding: 0;
    background: #fff;
    height: 40px;
    width: 40px;
    border-radius: 20px;
    cursor: ew-resize;
    pointer-events: auto;
    border: 1px solid #ddd;
    background-image: url(range-icon.png);
    background-position: 50% 50%;
    background-repeat: no-repeat;
    background-size: 40px 40px;
}
.leaflet-sbs-range::-moz-range-thumb {
    padding: 0;
    right: 0    ;
    background: #fff;
    height: 40px;
    width: 40px;
    border-radius: 20px;
    cursor: ew-resize;
    pointer-events: auto;
    border: 1px solid #ddd;
    background-image: url(range-icon.png);
    background-position: 50% 50%;
    background-repeat: no-repeat;
    background-size: 40px 40px;
}
.leaflet-sbs-range:disabled::-moz-range-thumb {
    cursor: default;
}
.leaflet-sbs-range:disabled::-ms-thumb {
    cursor: default;
}
.leaflet-sbs-range:disabled::-webkit-slider-thumb {
    cursor: default;
}
.leaflet-sbs-range:disabled {
    cursor: default;
}
.leaflet-sbs-range:focus {
    outline: none!important;
}
.leaflet-sbs-range::-moz-focus-outer {
    border: 0;
}

</style>
</head>
<body>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_2730a6866ba285b2aae37797f85cdd66&quot; ></div>
        
</body>
<script>
    
    
            var map_2730a6866ba285b2aae37797f85cdd66 = L.map(
                &quot;map_2730a6866ba285b2aae37797f85cdd66&quot;,
                {
                    center: [20.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    zoom: 2,
                    zoomControl: true,
                    preferCanvas: false,
                    drawExport: false,
                    layersControl: true,
                }
            );
            L.control.scale().addTo(map_2730a6866ba285b2aae37797f85cdd66);

            

        
    
            var tile_layer_aecb30cde57974d023d8250397c48231 = L.tileLayer(
                &quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;Data by \u0026copy; \u003ca target=\&quot;_blank\&quot; href=\&quot;http://openstreetmap.org\&quot;\u003eOpenStreetMap\u003c/a\u003e, under \u003ca target=\&quot;_blank\&quot; href=\&quot;http://www.openstreetmap.org/copyright\&quot;\u003eODbL\u003c/a\u003e.&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 24, &quot;maxZoom&quot;: 24, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_2730a6866ba285b2aae37797f85cdd66);
        
    
            L.control.fullscreen(
                {&quot;forceSeparateButton&quot;: false, &quot;position&quot;: &quot;topleft&quot;, &quot;title&quot;: &quot;Full Screen&quot;, &quot;titleCancel&quot;: &quot;Exit Full Screen&quot;}
            ).addTo(map_2730a6866ba285b2aae37797f85cdd66);
        
    
            var options = {
              position: &quot;topleft&quot;,
              draw: {},
              edit: {},
            }
            // FeatureGroup is to store editable layers.
            var drawnItems = new L.featureGroup().addTo(
                map_2730a6866ba285b2aae37797f85cdd66
            );
            options.edit.featureGroup = drawnItems;
            var draw_control_2294b2cbd38be5a6f027381d0de45310 = new L.Control.Draw(
                options
            ).addTo( map_2730a6866ba285b2aae37797f85cdd66 );
            map_2730a6866ba285b2aae37797f85cdd66.on(L.Draw.Event.CREATED, function(e) {
                var layer = e.layer,
                    type = e.layerType;
                var coords = JSON.stringify(layer.toGeoJSON());
                layer.on('click', function() {
                    alert(coords);
                    console.log(coords);
                });
                drawnItems.addLayer(layer);
             });
            map_2730a6866ba285b2aae37797f85cdd66.on('draw:created', function(e) {
                drawnItems.addLayer(e.layer);
            });
            
        
    
            var measure_control_ed8da50ab6c781afa1f452e22ab8bd44 = new L.Control.Measure(
                {&quot;position&quot;: &quot;bottomleft&quot;, &quot;primaryAreaUnit&quot;: &quot;sqmeters&quot;, &quot;primaryLengthUnit&quot;: &quot;meters&quot;, &quot;secondaryAreaUnit&quot;: &quot;acres&quot;, &quot;secondaryLengthUnit&quot;: &quot;miles&quot;});
            map_2730a6866ba285b2aae37797f85cdd66.addControl(measure_control_ed8da50ab6c781afa1f452e22ab8bd44);

        
    
            L.Control.geocoder(
                {&quot;collapsed&quot;: true, &quot;defaultMarkGeocode&quot;: true, &quot;position&quot;: &quot;topleft&quot;}
            ).on('markgeocode', function(e) {
                map_2730a6866ba285b2aae37797f85cdd66.setView(e.geocode.center, 11);
            }).addTo(map_2730a6866ba285b2aae37797f85cdd66);

        
    
            map_2730a6866ba285b2aae37797f85cdd66.fitBounds(
                [[20, 0], [20, 0]],
                {&quot;maxZoom&quot;: 2}
            );
        
    
            var tile_layer_bca331807912e52c479bb0fe0449bbd3 = L.tileLayer(
                &quot;https://mt1.google.com/vt/lyrs=s\u0026x={x}\u0026y={y}\u0026z={z}&quot;,
                {&quot;attribution&quot;: &quot;Google&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 100, &quot;maxZoom&quot;: 100, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1.0, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_2730a6866ba285b2aae37797f85cdd66);
        
    
            var tile_layer_63936371fb086e40abc0740e14b6dcb0 = L.tileLayer(
                &quot;https://titiler.xyz/mosaicjson/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fraw.githubusercontent.com%2Fprncevince%2Fmosaicjson-examples%2Fmain%2Fmaxar-open-data%2FIndia-Floods-Oct-2023%2Fmosaic-tiles-pre.json&quot;,
                {&quot;attribution&quot;: &quot;Maxar Technologies&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 100, &quot;maxZoom&quot;: 100, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1.0, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_2730a6866ba285b2aae37797f85cdd66);
        
    
            map_2730a6866ba285b2aae37797f85cdd66.fitBounds(
                [[27.068297314652288, 88.0647135872519], [28.0207973718472, 88.7249776667584]],
                {}
            );
        
    
            var tile_layer_1c4548745fb2e19ea0052a97b04ea6e4 = L.tileLayer(
                &quot;https://titiler.xyz/mosaicjson/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fraw.githubusercontent.com%2Fprncevince%2Fmosaicjson-examples%2Fmain%2Fmaxar-open-data%2FIndia-Floods-Oct-2023%2Fmosaic-tiles-post.json&quot;,
                {&quot;attribution&quot;: &quot;Maxar Technologies&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 100, &quot;maxZoom&quot;: 100, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1.0, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_2730a6866ba285b2aae37797f85cdd66);
        
    
            map_2730a6866ba285b2aae37797f85cdd66.fitBounds(
                [[27.83790264700207, 88.0647135872519], [27.97739805409392, 88.22174067073747]],
                {}
            );
        
    
        function geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;blue&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 1.5};
            }
        }
        function geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0, &quot;weight&quot;: 3.5};
            }
        }

        function geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_6a5ce9618a9ca2e892d096bc0b1590c6.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_6a5ce9618a9ca2e892d096bc0b1590c6 = L.geoJson(null, {
                onEachFeature: geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_onEachFeature,
            
                style: geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_styler,
        });

        function geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_add (data) {
            geo_json_6a5ce9618a9ca2e892d096bc0b1590c6
                .addData(data)
                .addTo(map_2730a6866ba285b2aae37797f85cdd66);
        }
            geo_json_6a5ce9618a9ca2e892d096bc0b1590c6_add({&quot;bbox&quot;: [88.099938, 27.115112, 88.6861707583004, 27.98493345], &quot;features&quot;: [{&quot;bbox&quot;: [88.099938, 27.855103, 88.195923, 27.944890571585933], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[88.195923, 27.855103], [88.16960251363923, 27.855104785964127], [88.16960251363923, 27.855104785964123], [88.11882300894217, 27.85510823158334], [88.10292994, 27.85510931], [88.10349847849541, 27.863946517259183], [88.10401718646392, 27.864584824770898], [88.10447442364112, 27.86810439435214], [88.10393617479338, 27.87860951889466], [88.10288901705547, 27.884022552783126], [88.1027076099686, 27.884024014623638], [88.10226466729233, 27.8872629945874], [88.099938, 27.921751], [88.10017088653818, 27.929176522753252], [88.10022955818266, 27.93104725188378], [88.10025933357515, 27.931996632024457], [88.10036708960209, 27.93543240309133], [88.10137907463692, 27.937122450151247], [88.10147980066061, 27.938184939253947], [88.1018369769593, 27.939454729299978], [88.10181320229565, 27.940779905634304], [88.10196761320914, 27.941629856112467], [88.10296437359403, 27.944178186633465], [88.10280980547829, 27.944890571585933], [88.11657054678403, 27.944889748188636], [88.1673920317312, 27.94488670719888], [88.195923, 27.944885], [88.195923, 27.931196503196585], [88.195923, 27.92837579196717], [88.195923, 27.886064991735353], [88.195923, 27.883244262936987], [88.195923, 27.855103]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;ard_metadata_version&quot;: &quot;0.0.1&quot;, &quot;bbox&quot;: [88.1, 27.86, 88.2, 27.94], &quot;catalog_id&quot;: &quot;10300100E34B4D00&quot;, &quot;datetime&quot;: &quot;2023-02-07 04:40:46+00:00&quot;, &quot;event&quot;: &quot;India-Floods-Oct-2023&quot;, &quot;footprint:clouds_area&quot;: 0.0, &quot;footprint:clouds_percent&quot;: 0.0, &quot;footprint:data_area&quot;: 92.06, &quot;gsd&quot;: 0.58, &quot;platform&quot;: &quot;WV02&quot;, &quot;pre_post&quot;: &quot;pre&quot;, &quot;tile:data_area&quot;: 9.6, &quot;utm_zone&quot;: [45], &quot;view:azimuth&quot;: 91.94, &quot;view:incidence_angle&quot;: 58.39, &quot;view:off_nadir&quot;: 27.88, &quot;view:sun_azimuth&quot;: 147.4, &quot;view:sun_elevation&quot;: 40.5, &quot;visual&quot;: &quot;https://maxar-opendata.s3.amazonaws.com/events/India-Floods-Oct-2023/ard/45/120220030321/2023-02-07/10300100E34B4D00-visual.tif&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [88.304504, 27.115112, 88.415527, 27.204895], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[88.36356910594291, 27.115112], [88.3604167155479, 27.115112], [88.36041669373321, 27.115112], [88.31313025650387, 27.115112], [88.31313022311386, 27.115112], [88.30997780694342, 27.115112], [88.30997777282877, 27.115112], [88.304504, 27.115112], [88.304504, 27.11782079920739], [88.304504, 27.160135031212917], [88.304504, 27.162955953947822], [88.304504, 27.204895], [88.31102598646932, 27.204895], [88.31418095936496, 27.204895], [88.36150526899726, 27.204895], [88.364660203798, 27.204895], [88.4119839312231, 27.204895], [88.41513880156957, 27.204895], [88.415527, 27.204895], [88.415527, 27.199118145291447], [88.41527213428377, 27.198133318370576], [88.41514579248668, 27.195691140817416], [88.41501387309606, 27.195002674536422], [88.41501214791816, 27.19486606819873], [88.41464968228128, 27.19309174750974], [88.41461792317752, 27.192696298123728], [88.41438272424156, 27.18964779273096], [88.4147121954216, 27.18685922323479], [88.41482911806254, 27.185978365510728], [88.41483307322855, 27.185836140835992], [88.41485014371949, 27.18569166006431], [88.41514256302767, 27.178595242696375], [88.41511805939338, 27.173234753360067], [88.415527, 27.16784286572987], [88.415527, 27.16634140718457], [88.41493780749462, 27.16129632054779], [88.41493263443525, 27.160972477893612], [88.41454577255146, 27.157884906308926], [88.41453039074244, 27.156662918342853], [88.4147241128971, 27.154445815133933], [88.4145561766151, 27.152604577083924], [88.41467427255124, 27.15122325395953], [88.41449398496611, 27.149134211286594], [88.41444914601266, 27.14704104777041], [88.4145157743849, 27.145974284987883], [88.41484034472677, 27.144117061142136], [88.41474141343198, 27.142374296105498], [88.41471625934606, 27.13915423555256], [88.41512949588866, 27.136026171592565], [88.41491173085853, 27.131447197193587], [88.41488821651691, 27.125910358454863], [88.415003337237, 27.118912092077636], [88.41494333561626, 27.117813544261708], [88.41476068754636, 27.11649065641791], [88.41471415955608, 27.11599219624146], [88.41461934535859, 27.11546693981293], [88.41457033963822, 27.115112], [88.41455527506513, 27.115112], [88.41400736735062, 27.115112], [88.41400735214587, 27.115112], [88.4108550026262, 27.115112], [88.41085499465339, 27.115112], [88.36356912693823, 27.115112], [88.36356910594291, 27.115112]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;ard_metadata_version&quot;: &quot;0.0.1&quot;, &quot;bbox&quot;: [88.3, 27.12, 88.42, 27.2], &quot;catalog_id&quot;: &quot;1040010073381800&quot;, &quot;datetime&quot;: &quot;2022-03-14 04:46:37+00:00&quot;, &quot;event&quot;: &quot;India-Floods-Oct-2023&quot;, &quot;footprint:clouds_area&quot;: 0.0, &quot;footprint:clouds_percent&quot;: 0.0, &quot;footprint:data_area&quot;: 108.9, &quot;gsd&quot;: 0.37, &quot;platform&quot;: &quot;WV03&quot;, &quot;pre_post&quot;: &quot;pre&quot;, &quot;tile:data_area&quot;: 4.6, &quot;utm_zone&quot;: [45], &quot;view:azimuth&quot;: 155.8, &quot;view:incidence_angle&quot;: 61.13, &quot;view:off_nadir&quot;: 26.12, &quot;view:sun_azimuth&quot;: 140.37, &quot;view:sun_elevation&quot;: 53.4, &quot;visual&quot;: &quot;https://maxar-opendata.s3.amazonaws.com/events/India-Floods-Oct-2023/ard/45/120220211223/2022-03-14/1040010073381800-visual.tif&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [88.274109, 27.895081, 88.33837668371078, 27.984931730924327], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[88.33798281682124, 27.9298920893673], [88.33798442792597, 27.929892073820028], [88.33803101268242, 27.89508878625039], [88.31924864832114, 27.895086498397028], [88.274109, 27.895081], [88.274109, 27.927676309164625], [88.274109, 27.930496979574322], [88.274109, 27.972806905003594], [88.274109, 27.975627557981408], [88.274109, 27.984924], [88.32034066994221, 27.984929561692972], [88.33837244346603, 27.984931730924327], [88.33837668371078, 27.984584477306846], [88.33816793785729, 27.97219953290593], [88.33815409989033, 27.9721996666114], [88.33798281682124, 27.9298920893673]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;ard_metadata_version&quot;: &quot;0.0.1&quot;, &quot;bbox&quot;: [88.27, 27.9, 88.34, 27.98], &quot;catalog_id&quot;: &quot;10300100CF621C00&quot;, &quot;datetime&quot;: &quot;2022-03-07 04:54:46+00:00&quot;, &quot;event&quot;: &quot;India-Floods-Oct-2023&quot;, &quot;footprint:clouds_area&quot;: 0.0, &quot;footprint:clouds_percent&quot;: 0.0, &quot;footprint:data_area&quot;: 62.68, &quot;gsd&quot;: 0.46, &quot;platform&quot;: &quot;WV02&quot;, &quot;pre_post&quot;: &quot;pre&quot;, &quot;tile:data_area&quot;: 18.6, &quot;utm_zone&quot;: [45], &quot;view:azimuth&quot;: 126.58, &quot;view:incidence_angle&quot;: 87.93, &quot;view:off_nadir&quot;: 1.83, &quot;view:sun_azimuth&quot;: 145.47, &quot;view:sun_elevation&quot;: 51.3, &quot;visual&quot;: &quot;https://maxar-opendata.s3.amazonaws.com/events/India-Floods-Oct-2023/ard/45/120220031221/2022-03-07/10300100CF621C00-visual.tif&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [88.58429, 27.555115, 88.6861707583004, 27.644900414943933], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[88.67278280925821, 27.555117976011097], [88.61898359225303, 27.555116166744693], [88.58429, 27.555115], [88.58429, 27.56342937643044], [88.58429, 27.566249966640182], [88.58429, 27.608558694331236], [88.58429, 27.61137926781072], [88.58429, 27.644897], [88.62030378636328, 27.644898207147094], [88.67414689883807, 27.64490001191586], [88.67414689883807, 27.644900011915855], [88.6861707583004, 27.644900414943933], [88.68570285849705, 27.626183718127194], [88.68599899651423, 27.607362190413657], [88.68599028325869, 27.607362295801792], [88.68614925375552, 27.602030629902814], [88.68587690570476, 27.590093666219868], [88.68613983009288, 27.58121306814051], [88.68585738323095, 27.562336644194275], [88.6858946245626, 27.55511841696114], [88.67278280925821, 27.555117976011097]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;ard_metadata_version&quot;: &quot;0.0.1&quot;, &quot;bbox&quot;: [88.58, 27.56, 88.69, 27.64], &quot;catalog_id&quot;: &quot;10300100CE8D0400&quot;, &quot;datetime&quot;: &quot;2022-03-07 04:54:21+00:00&quot;, &quot;event&quot;: &quot;India-Floods-Oct-2023&quot;, &quot;footprint:clouds_area&quot;: 0.0, &quot;footprint:clouds_percent&quot;: 0.0, &quot;footprint:data_area&quot;: 99.85, &quot;gsd&quot;: 0.49, &quot;platform&quot;: &quot;WV02&quot;, &quot;pre_post&quot;: &quot;pre&quot;, &quot;tile:data_area&quot;: 20.1, &quot;utm_zone&quot;: [45], &quot;view:azimuth&quot;: 7.48, &quot;view:incidence_angle&quot;: 74.63, &quot;view:off_nadir&quot;: 13.69, &quot;view:sun_azimuth&quot;: 145.6, &quot;view:sun_elevation&quot;: 51.77, &quot;visual&quot;: &quot;https://maxar-opendata.s3.amazonaws.com/events/India-Floods-Oct-2023/ard/45/120220033313/2022-03-07/10300100CE8D0400-visual.tif&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [88.274109, 27.895081, 88.35266229, 27.98493345], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[88.352252, 27.94869], [88.3522273780465, 27.929752933707203], [88.35221616903601, 27.921131937209], [88.35207357819611, 27.915918552371366], [88.35220357233432, 27.911443649274], [88.35218231, 27.89509051], [88.31924864832114, 27.895086498397028], [88.274109, 27.895081], [88.274109, 27.927676309164625], [88.274109, 27.930496979574322], [88.274109, 27.972806905003594], [88.274109, 27.975627557981408], [88.274109, 27.984924], [88.32034070046087, 27.984929561696642], [88.35266229, 27.98493345], [88.35254847487529, 27.97487945701542], [88.352252, 27.94869]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;5&quot;, &quot;properties&quot;: {&quot;ard_metadata_version&quot;: &quot;0.0.1&quot;, &quot;bbox&quot;: [88.27, 27.9, 88.35, 27.98], &quot;catalog_id&quot;: &quot;10300100CE36CE00&quot;, &quot;datetime&quot;: &quot;2022-03-07 04:53:48+00:00&quot;, &quot;event&quot;: &quot;India-Floods-Oct-2023&quot;, &quot;footprint:clouds_area&quot;: 0.0, &quot;footprint:clouds_percent&quot;: 0.0, &quot;footprint:data_area&quot;: 76.62, &quot;gsd&quot;: 0.56, &quot;platform&quot;: &quot;WV02&quot;, &quot;pre_post&quot;: &quot;pre&quot;, &quot;tile:data_area&quot;: 25.6, &quot;utm_zone&quot;: [45], &quot;view:azimuth&quot;: 16.13, &quot;view:incidence_angle&quot;: 60.43, &quot;view:off_nadir&quot;: 26.13, &quot;view:sun_azimuth&quot;: 145.2, &quot;view:sun_elevation&quot;: 51.2, &quot;visual&quot;: &quot;https://maxar-opendata.s3.amazonaws.com/events/India-Floods-Oct-2023/ard/45/120220031203/2022-03-07/10300100CE36CE00-visual.tif&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_6a5ce9618a9ca2e892d096bc0b1590c6.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let aliases = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: false});
                     
    
    geo_json_6a5ce9618a9ca2e892d096bc0b1590c6.bindPopup(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;visual&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let aliases = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;visual&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i].toLocaleString()}</th>
            
            <td>${handleObject(layer.feature.properties[v]).toLocaleString()}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumpopup&quot;});
                     
    
            map_2730a6866ba285b2aae37797f85cdd66.fitBounds(
                [[27.115112, 88.6861707583004], [27.98493345, 88.099938]],
                {}
            );
        
    
        function geo_json_84921d797cd86c07ac30a04bd6eea4e7_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;color&quot;: &quot;red&quot;, &quot;fillOpacity&quot;: 0, &quot;weight&quot;: 1.5};
            }
        }
        function geo_json_84921d797cd86c07ac30a04bd6eea4e7_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0, &quot;weight&quot;: 3.5};
            }
        }

        function geo_json_84921d797cd86c07ac30a04bd6eea4e7_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_84921d797cd86c07ac30a04bd6eea4e7.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_84921d797cd86c07ac30a04bd6eea4e7_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_84921d797cd86c07ac30a04bd6eea4e7 = L.geoJson(null, {
                onEachFeature: geo_json_84921d797cd86c07ac30a04bd6eea4e7_onEachFeature,
            
                style: geo_json_84921d797cd86c07ac30a04bd6eea4e7_styler,
        });

        function geo_json_84921d797cd86c07ac30a04bd6eea4e7_add (data) {
            geo_json_84921d797cd86c07ac30a04bd6eea4e7
                .addData(data)
                .addTo(map_2730a6866ba285b2aae37797f85cdd66);
        }
            geo_json_84921d797cd86c07ac30a04bd6eea4e7_add({&quot;bbox&quot;: [88.10045706347941, 27.855103, 88.195923, 27.9448907], &quot;features&quot;: [{&quot;bbox&quot;: [88.10045706347941, 27.855103, 88.195923, 27.9448907], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[88.195923, 27.855103], [88.16642869358833, 27.85510500132218], [88.11564916342684, 27.855108446943124], [88.10292994, 27.85510931], [88.103702, 27.86711], [88.102851, 27.883037], [88.102355, 27.885924], [88.10229268129534, 27.886847745234537], [88.1008154781203, 27.908744211164226], [88.10094493307096, 27.91050217657665], [88.10148100478686, 27.91474833146962], [88.10170160049127, 27.921214502999845], [88.10158746664413, 27.923416385816957], [88.10224006221662, 27.92629804259027], [88.10228223411603, 27.92946457604007], [88.1022475866312, 27.93036946073309], [88.10179840913325, 27.931984425812146], [88.10185235222687, 27.931983990709146], [88.10063556972537, 27.936599502661917], [88.10045706347941, 27.938301195244208], [88.10051073381099, 27.94001245889826], [88.10058236241987, 27.940530813570565], [88.1005361421895, 27.940822598008026], [88.10066373, 27.9448907], [88.11657054678403, 27.944889748188636], [88.1673920317312, 27.94488670719888], [88.195923, 27.944885], [88.195923, 27.931196503196585], [88.195923, 27.92837579196717], [88.195923, 27.886064991735353], [88.195923, 27.883244262936987], [88.195923, 27.855103]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;ard_metadata_version&quot;: &quot;0.0.1&quot;, &quot;bbox&quot;: [88.1, 27.86, 88.2, 27.94], &quot;catalog_id&quot;: &quot;1050010036A0EC00&quot;, &quot;datetime&quot;: &quot;2023-10-06 05:04:41+00:00&quot;, &quot;event&quot;: &quot;India-Floods-Oct-2023&quot;, &quot;footprint:clouds_area&quot;: 0.0, &quot;footprint:clouds_percent&quot;: 0.0, &quot;footprint:data_area&quot;: 91.95, &quot;gsd&quot;: 0.49, &quot;platform&quot;: &quot;GE01&quot;, &quot;pre_post&quot;: &quot;post&quot;, &quot;tile:data_area&quot;: 3.2, &quot;utm_zone&quot;: [45], &quot;view:azimuth&quot;: 261.48, &quot;view:incidence_angle&quot;: 61.12, &quot;view:off_nadir&quot;: 25.88, &quot;view:sun_azimuth&quot;: 157.6, &quot;view:sun_elevation&quot;: 55.0, &quot;visual&quot;: &quot;https://maxar-opendata.s3.amazonaws.com/events/India-Floods-Oct-2023/ard/45/120220030303/2023-10-06/1050010036A0EC00-visual.tif&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_84921d797cd86c07ac30a04bd6eea4e7.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let aliases = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: false});
                     
    
    geo_json_84921d797cd86c07ac30a04bd6eea4e7.bindPopup(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;visual&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let aliases = [&quot;event&quot;, &quot;pre_post&quot;, &quot;catalog_id&quot;, &quot;ard_metadata_version&quot;, &quot;datetime&quot;, &quot;platform&quot;, &quot;tile:data_area&quot;, &quot;visual&quot;, &quot;utm_zone&quot;, &quot;footprint:clouds_area&quot;, &quot;gsd&quot;, &quot;footprint:clouds_percent&quot;, &quot;view:off_nadir&quot;, &quot;view:azimuth&quot;, &quot;view:incidence_angle&quot;, &quot;view:sun_azimuth&quot;, &quot;view:sun_elevation&quot;, &quot;footprint:data_area&quot;, &quot;bbox&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i].toLocaleString()}</th>
            
            <td>${handleObject(layer.feature.properties[v]).toLocaleString()}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumpopup&quot;});
                     
    
            map_2730a6866ba285b2aae37797f85cdd66.fitBounds(
                [[27.855103, 88.195923], [27.9448907, 88.10045706347941]],
                {}
            );
        
    // For literal {, we need 2 curly brackets due to python's .format
// L.map variable - replaced with unique Folium widget map name
var m = map_2730a6866ba285b2aae37797f85cdd66
// tooltip LayerGroup - replaced with list of unique GeoJSON  
var l_lg_tt = [geo_json_6a5ce9618a9ca2e892d096bc0b1590c6, geo_json_84921d797cd86c07ac30a04bd6eea4e7]
l_lg_tt.forEach(addEventListenersLg)
function addEventListenersLg(lg) {
  lg.on('mouseover', function(e) {
    if (lg.isPopupOpen()) {
      tt = lg.getTooltip()
      pu = lg.getPopup()
      // check if ids are the same - if so then close - otherwise allow :)
      if (pu._source._leaflet_id == tt._source._leaflet_id) {
        m.closeTooltip(tt) // lg.closeTooltip()
      }
    }
  })
}
    var mapWasDragEnabled
var mapWasTapEnabled

// Leaflet v0.7 backwards compatibility
function on (el, types, fn, context) {
  types.split(' ').forEach(function (type) {
    L.DomEvent.on(el, type, fn, context)
  })
}

// Leaflet v0.7 backwards compatibility
function off (el, types, fn, context) {
  types.split(' ').forEach(function (type) {
    L.DomEvent.off(el, type, fn, context)
  })
}

function getRangeEvent (rangeInput) {
  return 'oninput' in rangeInput ? 'input' : 'change'
}

function cancelMapDrag () {
  mapWasDragEnabled = this._map.dragging.enabled()
  mapWasTapEnabled = this._map.tap &amp;&amp; this._map.tap.enabled()
  this._map.dragging.disable()
  this._map.tap &amp;&amp; this._map.tap.disable()
}

function uncancelMapDrag (e) {
  this._refocusOnMap(e)
  if (mapWasDragEnabled) {
    this._map.dragging.enable()
  }
  if (mapWasTapEnabled) {
    this._map.tap.enable()
  }
}

// convert arg to an array - returns empty array if arg is undefined
function asArray (arg) {
  return (arg === 'undefined') ? [] : Array.isArray(arg) ? arg : [arg]
}

function noop () {}

L.Control.SideBySide = L.Control.extend({
  options: {
    thumbSize: 42,
    padding: 0
  },

  initialize: function (leftLayers, rightLayers, options) {
    this.setLeftLayers(leftLayers)
    this.setRightLayers(rightLayers)
    L.setOptions(this, options)
  },

  getPosition: function () {
    var rangeValue = this._range.value
    var offset = (0.5 - rangeValue) * (2 * this.options.padding + this.options.thumbSize)
    return this._map.getSize().x * rangeValue + offset
  },

  setPosition: noop,

  includes: L.Evented.prototype || L.Mixin.Events,

  addTo: function (map) {
    this.remove()
    this._map = map

    var container = this._container = L.DomUtil.create('div', 'leaflet-sbs', map._controlContainer)

    this._divider = L.DomUtil.create('div', 'leaflet-sbs-divider', container)
    var range = this._range = L.DomUtil.create('input', 'leaflet-sbs-range', container)
    range.type = 'range'
    range.min = 0
    range.max = 1
    range.step = 'any'
    range.value = 0.5
    range.style.paddingLeft = range.style.paddingRight = this.options.padding + 'px'
    this._addEvents()
    this._updateLayers()
    return this
  },

  remove: function () {
    if (!this._map) {
      return this
    }
    if (this._leftLayer) {
      this._leftLayer.getContainer().style.clip = ''
    }
    if (this._rightLayer) {
      this._rightLayer.getContainer().style.clip = ''
    }
    this._removeEvents()
    L.DomUtil.remove(this._container)

    this._map = null

    return this
  },

  setLeftLayers: function (leftLayers) {
    this._leftLayers = asArray(leftLayers)
    this._updateLayers()
    return this
  },

  setRightLayers: function (rightLayers) {
    this._rightLayers = asArray(rightLayers)
    this._updateLayers()
    return this
  },

  _updateClip: function () {
    var map = this._map
    var nw = map.containerPointToLayerPoint([0, 0])
    var se = map.containerPointToLayerPoint(map.getSize())
    var clipX = nw.x + this.getPosition()
    var dividerX = this.getPosition()

    this._divider.style.left = dividerX + 'px'
    this.fire('dividermove', {x: dividerX})
    var clipLeft = 'rect(' + [nw.y, clipX, se.y, nw.x].join('px,') + 'px)'
    var clipRight = 'rect(' + [nw.y, se.x, se.y, clipX].join('px,') + 'px)'
    if (this._leftLayer) {
      this._leftLayer.getContainer().style.clip = clipLeft
    }
    if (this._rightLayer) {
      this._rightLayer.getContainer().style.clip = clipRight
    }
  },

  _updateLayers: function () {
    if (!this._map) {
      return this
    }
    var prevLeft = this._leftLayer
    var prevRight = this._rightLayer
    this._leftLayer = this._rightLayer = null
    this._leftLayers.forEach(function (layer) {
      if (this._map.hasLayer(layer)) {
        this._leftLayer = layer
      }
    }, this)
    this._rightLayers.forEach(function (layer) {
      if (this._map.hasLayer(layer)) {
        this._rightLayer = layer
      }
    }, this)
    if (prevLeft !== this._leftLayer) {
      prevLeft &amp;&amp; this.fire('leftlayerremove', {layer: prevLeft})
      this._leftLayer &amp;&amp; this.fire('leftlayeradd', {layer: this._leftLayer})
    }
    if (prevRight !== this._rightLayer) {
      prevRight &amp;&amp; this.fire('rightlayerremove', {layer: prevRight})
      this._rightLayer &amp;&amp; this.fire('rightlayeradd', {layer: this._rightLayer})
    }
    this._updateClip()
  },

  _addEvents: function () {
    var range = this._range;
    var map = this._map;
    if (!map || !range) return;
    map.on(&quot;move&quot;, this._updateClip, this);
    map.on(&quot;layeradd layerremove&quot;, this._updateLayers, this);
    L.DomEvent.on(range, getRangeEvent(range), this._updateClip, this);
    L.DomEvent.on(range, &quot;touchstart&quot;, cancelMapDrag, this);
    L.DomEvent.on(range, &quot;touchend&quot;, uncancelMapDrag, this);
    L.DomEvent.on(range, &quot;mousedown&quot;, cancelMapDrag, this);
    L.DomEvent.on(range, &quot;mouseup&quot;, uncancelMapDrag, this);
  },

  _removeEvents: function () {
    var range = this._range;
    var map = this._map;
    if (range) {
      L.DomEvent.off(range, getRangeEvent(range), this._updateClip, this);
      L.DomEvent.off(range, &quot;touchstart&quot;, cancelMapDrag, this);
      L.DomEvent.off(range, &quot;touchend&quot;, uncancelMapDrag, this);
      L.DomEvent.off(range, &quot;mousedown&quot;, cancelMapDrag, this);
      L.DomEvent.off(range, &quot;mouseup&quot;, uncancelMapDrag, this);
    }
    if (map) {
      map.off(&quot;layeradd layerremove&quot;, this._updateLayers, this);
      map.off(&quot;move&quot;, this._updateClip, this);
    }
  },
})

L.control.sideBySide = function (leftLayers, rightLayers, options) {
  return new L.Control.SideBySide(leftLayers, rightLayers, options)
}
    L.control.sideBySide([tile_layer_1c4548745fb2e19ea0052a97b04ea6e4], [tile_layer_bca331807912e52c479bb0fe0449bbd3]).addTo(map_2730a6866ba285b2aae37797f85cdd66);
    
            var layer_control_d509450e0445d11ad44f76bad0c20237 = {
                base_layers : {
                    &quot;openstreetmap&quot; : tile_layer_aecb30cde57974d023d8250397c48231,
                },
                overlays :  {
                    &quot;Google Satellite&quot; : tile_layer_bca331807912e52c479bb0fe0449bbd3,
                    &quot;Pre-Event - Mosaic&quot; : tile_layer_63936371fb086e40abc0740e14b6dcb0,
                    &quot;Post-Event - Mosaic&quot; : tile_layer_1c4548745fb2e19ea0052a97b04ea6e4,
                    &quot;Pre Event - Image Footprints&quot; : geo_json_6a5ce9618a9ca2e892d096bc0b1590c6,
                    &quot;Post Event - Image Footprints&quot; : geo_json_84921d797cd86c07ac30a04bd6eea4e7,
                },
            };
            L.control.layers(
                layer_control_d509450e0445d11ad44f76bad0c20237.base_layers,
                layer_control_d509450e0445d11ad44f76bad0c20237.overlays,
                {&quot;autoZIndex&quot;: true, &quot;collapsed&quot;: true, &quot;position&quot;: &quot;topright&quot;}
            ).addTo(map_2730a6866ba285b2aae37797f85cdd66);
        
</script>
</html>" width="100%" height="600" style="border:none !important;" "allowfullscreen"="" "webkitallowfullscreen"="" "mozallowfullscreen"=""></iframe>
<figcaption class="figure-caption">Figure&nbsp;3: A split web map of Pre/Post Event Imagery after the Flooding in Northern India.<br> Sources: <a href="https://github.com/opengeos/maxar-open-data">opengeos/maxar-open-data</a> Github &amp; <a href="https://stacindex.org/catalogs/maxar-open-data-catalog-ard-format">Maxar Open Data Program STAC</a></figcaption>
</figure>
</div>
</div>
</section>
<section id="wrap-up" class="level2">
<h2 class="anchored" data-anchor-id="wrap-up">Wrap-up</h2>
<p>If you have any thoughts or questions, feel free to let me know what you think in the comments below. You’ll need to sign in to your GitHub account to do so. Like my work? Feel free to <a href="../../../about/">reach out</a>.</p>
<p>We only have one rock, and it’s a beautiful one. Thanks for reading! ✌️🌍</p>
<div id="fig-video-demo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/9WKJcHAwTRw" title="2023 South Lhonak Lake Sikkim, India - Maxar Open Data Program Leaflet Split Map" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<figcaption class="figure-caption">Figure&nbsp;4: 2023 South Lhonak Lake Sikkim, India - Maxar Open Data Program Leaflet Split Map</figcaption>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        console.log("RESIZE");
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/prncevince\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
<script src="https://giscus.app/client.js" data-repo="prncevince/prncevince.github.io" data-repo-id="R_kgDOKP3DoA" data-category="Comments" data-category-id="DIC_kwDOKP3DoM4CZv-L" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="preferred_color_scheme">
<input type="hidden" id="giscus-alt-theme" value="preferred_color_scheme">
</div> <!-- /content -->
<script src="../../../assets/js/posts.js"></script>




<script src="https://platform.twitter.com/widgets.js"></script>
</body></html>